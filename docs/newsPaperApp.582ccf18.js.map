{"version":3,"sources":["index.js"],"names":["handleLogin","username","$","val","password","get","url","success","removeClass","fadeOut","show","statusCode","addClass","beforeSend","apiCredentials","setRequestHeader","btoa","newArticleTemplate","element","title","dateCreated","content","appendArticlesToList","data","searchLimit","pagination","total","i","template","documents","appendTo","attr","onclick","searchIndicator","errorMessage","handleSearch","searchWords","remove","hide","searchArticles","setTimeout","checkArticleAmount","limit","length","appendNewArticle","document","ready","click","keydown","enterKey","keyCode","enteredKey","focus","deletedArticles","newArticleAmountCounter","Number","callback","encodeURI"],"mappings":"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","file":"newsPaperApp.582ccf18.js","sourceRoot":"..","sourcesContent":["$(document).ready(function () {\n\n    // configure screens\n    $(\".loginSection\").show();\n    $(\".searchSection\").hide();\n    $(\".searchSection__articles\").hide();\n    $(\".searchSection__articles--invalid\").hide();\n    $(\".searchSection__main--invalid\").hide();\n\n    // register event handlers\n    $(\".login__confirmButton\").click(handleLogin);\n    $(\".search__button\").click(handleSearch);\n\n    // switch focus on input field and confirm username and password from any input field\n    $(\".login__username\").keydown(function (enterKey) {\n        if (enterKey.keyCode == 13) {\n            handleLogin();\n        }\n    })\n    $(\".login__password\").keydown(function (enterKey) {\n        if (enterKey.keyCode == 13) {\n            handleLogin();\n        }\n    })\n    $(\".login__username\").keydown(function (enteredKey) {\n        if (enteredKey.keyCode == 40) {\n            $('.login__password').focus()\n        }\n    })\n    $(\".login__password\").keydown(function (enteredKey) {\n        if (enteredKey.keyCode == 40) {\n            $('.login__confirmButton').focus()\n        } else if (enteredKey.keyCode == 38) {\n            $('.login__username').focus()\n        }\n    })\n    $(\".login__confirmButton\").keydown(function (enteredKey) {\n        if (enteredKey.keyCode == 38) {\n            $('.login__password').focus()\n        }\n    })\n\n});\n\nfunction handleLogin() {\n    const username = $('.login__username').val();\n    const password = $('.login__password').val();\n    $.get({\n        url: \"https://thawing-ridge-63424.herokuapp.com/health/\",\n        success: function () {\n            $(\".login\").removeClass('login--invalid');\n            $(\".login__username\").removeClass('login__username--invalid');\n            $(\".login__password\").removeClass('login__password--invalid');\n            $(\".login__confirmButton\").removeClass('login__confirmButton--invalid');\n            $(\".header\").removeClass('header--invalid');\n            $(\".footer\").removeClass('footer--invalid');\n            $(\".login\").fadeOut(function () {\n                $(\".searchSection\").show();\n            });\n        },\n        statusCode: {\n            401: function () {\n                $(\".login\").addClass('login--invalid');\n                $(\".header\").addClass('header--invalid');\n                $(\".footer\").addClass('footer--invalid');\n                $(\".login__username\").addClass('login__username--invalid');\n                $(\".login__password\").addClass('login__password--invalid');\n                $(\".login__confirmButton\").addClass('login__confirmButton--invalid');\n                $(\".login__username\").val('');\n                $(\".login__password\").val('');\n            }\n        },\n        beforeSend: function (apiCredentials) {\n            apiCredentials.setRequestHeader(\"Authorization\", \"Basic \" + btoa(username + \":\" + password));\n        }\n    });\n}\n\nfunction newArticleTemplate(element) {\n    return `<article class='searchSection__articles'><header class='searchSection__header'><h3>${element.title}</h3><h4>${element.dateCreated}</h4></header><main class ='searchSection__main'>${element.content}</main><footer class='searchSection__footer'><a target='_blank' href='${element.url}'>Go to the Website to read the full article</a></footer></article>`;\n}\n\nfunction appendArticlesToList(data) {\n\n    var searchLimit = $('.search__limit').val();\n\n    if (data.pagination.total != 0 && searchLimit > 0) {\n        if (searchLimit > 99) {\n            searchLimit = 99\n        }\n        for (i = 0; i < searchLimit; i++) {\n            let element = data.documents[i];\n            let template = newArticleTemplate(element);\n\n            $(template).appendTo(\".searchSection\"),\n                $(\"header\").attr({\n                    onclick: '$(this).closest(\".searchSection__articles\").remove()'\n                })\n        }\n        searchIndicator();\n    } else {\n        errorMessage();\n    }\n}\n\nfunction handleSearch() {\n\n    const searchWords = $('.search__bar').val();\n\n    $(\".searchSection__articles\").remove();\n    $(\".searchSection__articles--invalid\").hide();\n    $(\".searchSection__main--invalid\").hide();\n\n    searchArticles(searchWords, appendArticlesToList);\n\n    //setTimeout(checkArticleAmount, 500);\n}\n\nfunction errorMessage() {\n    $(\".search__bar\").addClass('search__bar--invalid');\n    $(\".search__button\").addClass('search__button--invalid');\n    $(\".search__limit\").addClass('search__limit--invalid');\n    $(\".searchSection__articles--invalid\").show();\n    $(\".searchSection__main--invalid\").show();\n    $(\".header\").addClass('header--invalid');\n    $(\".footer\").addClass('footer--invalid');\n    setTimeout(function () {\n        $(\".search__bar\").removeClass('search__bar--invalid');\n        $(\".search__button\").removeClass('search__button--invalid');\n        $(\".search__limit\").removeClass('search__limit--invalid');\n        $(\".header\").removeClass('header--invalid');\n        $(\".footer\").removeClass('footer--invalid');\n        $(\".search__bar\").val('');\n    }, 1000);\n\n}\n\nfunction searchIndicator() {\n    $(\".search__button\").addClass('search__button--active');\n    $(\".search__limit\").addClass('search__limit--active');\n    $(\".header\").addClass('header--active');\n    $(\".footer\").addClass('footer--active');\n    setTimeout(function () {\n        $(\".search__button\").removeClass('search__button--active');\n        $(\".search__limit\").removeClass('search__limit--active');\n        $(\".header\").removeClass('header--active');\n        $(\".footer\").removeClass('footer--active');\n        $(\".search__bar\").val('');\n    }, 1000);\n}\n\n\nfunction checkArticleAmount() {\n    const limit = $('.search__limit').val();\n    if ($('.searchSection__articles').length < limit) {\n        const searchWords = $('.search__bar').val();\n        searchArticles(searchWords, appendNewArticle);\n    }\n    setTimeout(checkArticleAmount, 1000);\n}\n\n\nvar deletedArticles = 1;\n\nfunction appendNewArticle(data) {\n    var newArticleAmountCounter = Number($('.search__limit').val()) + deletedArticles;\n    let element = data.documents[newArticleAmountCounter];\n    let template = newArticleTemplate(element);\n    $(template).appendTo(\".searchSection\"),\n        $(\"header\").attr({\n            onclick: '$(this).closest(\".searchSection__articles\").remove()'\n        })\n    deletedArticles++;\n}\n\nfunction searchArticles(searchWords, callback) {\n    $(\".searchSection__articles--invalid\").hide();\n    $(\".searchSection__main--invalid\").hide();\n    const username = $('.login__username').val();\n    const password = $('.login__password').val();\n    data = $.get({\n        url: \"https://thawing-ridge-63424.herokuapp.com/api/search?term=\" + encodeURI(searchWords),\n        beforeSend: function (apiCredentials) {\n            apiCredentials.setRequestHeader(\"Authorization\", \"Basic \" + btoa(username + \":\" + password));\n        },\n        success: function (data) {\n            callback(data);\n        },\n        statusCode: {\n            400: function () {\n                errorMessage();\n            },\n            401: function () {\n                errorMessage();\n            },\n            500: function () {\n                errorMessage();\n            }\n        }\n    });\n}"]}